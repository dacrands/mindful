<% include ../partials/header %>

<!-- <style>
    ul {
    display: none;
}
.chart div {
    font: 10px sans-serif;
    background-color: orangered;
    text-align: right;
    padding: 3px;
    margin: 1px;
    color: white;
}
</style> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.min.js"></script>

<div class="time-list">
    <% const times = sessions.map(sessions => sessions.time) %>
    <ul>
        <% times.forEach(function(time) {%>
            <li><%= time %></li>
        <% }); %>
    </ul>
</div>

<div class="container chart-container">
    <h2 class="text-center">Meditations</h2>
    <br>
    <div class="chart">
    </div>
</div>

 <script>
    var data = [];
    const times = document.querySelectorAll('.time-list li');
    times.forEach(function(time){
        if (time !== NaN){
            data.push(parseInt(time.innerHTML));
        }        
    });
    console.log(data);
    d3.select(".chart") 
    .selectAll("div") 
       .data(data) 
       .enter().append("div") 
        .style("width", function(d) { return d * 10 + "px"; }) 
        .text(function(d) { return d; });
</script>

<% include ../partials/footer %>


<script src="chart.js"></script>